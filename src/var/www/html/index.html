<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="github-markdown.css">
<style>
  .markdown-body {
    box-sizing: border-box;
    min-width: 200px;
    max-width: 980px;
    margin: 0 auto;
    padding: 45px;
  }

  @media (max-width: 767px) {
    .markdown-body {
      padding: 15px;
    }
  }

  p, li {
    text-align: justify;
  }
</style>
<article class="markdown-body">
  <h1>dev-email-server</h1>
  <p>
    Это конечно далеко не идеальная реализация docker-контейнера с email-сервером и
    сопутствующими сервисами, но мне она очень помогает в процессе разработки
    ПО, которое отсылает и/или получает email-сообщения различным адресатам.
  </p>
  <p>
    Довольно часто при разработке такого ПО нужно проверить какие именно email
    отсылаются и получаются (адреса отправителя и получателя, заголовки и тело письма).
    При этом далеко не всегда удобно использовать на время тестов "подставные" тестовые
    email-адреса и какие-то "внешние сервисы". Также, бывает необходимо проверить
    сам протокол обмена данными в процессе отправки и получения email-сообщений.
  </p>
  <p>
    Для облегчения этой задачи я собрал для себя набор сервисов, которые упаковал в
    docker-образ, чтобы любой желающий мог скачать и запустить его в себя на компьютере.
  </p>
  <p>
    Основная особенность данного набора то, что он позволяет отправлять и получать
    email для абсолютно любых корректных email-адресов, например, вы можете отправить письмо
    (через smtp/smtps) с адреса mail1@company1.com на адрес mail2@company2.com, а потом
    подключиться к почтовому ящику (через imap/imaps/pop3d/pop3ds) mail2@company2.com
    и прочитать это письмо со всеми заголовками.
  </p>
  <p>
    Для тестирования обработки писем, которые небыли доставлены, настроен (можно изменить)
    домен bad-domain.com. Письма на любой адрес этого домена будут возвращаться, как
    недоставленные (через некоторое время).
  </p>
  <p>
    Для аутентификации на сервисах всегда в качестве логина используется полный email-адрес и
    часть адреса до символа @, в качестве пароля.
  </p>
  <p>
    При настройке отправки email через smtp/smtps нужно обязательно использовать
    авторизацию по логину и паролю (с использованием ssl/tls или нет неважно),
    т.к. возможность пересылки сообщений (relay) на любой адрес включена только если
    отправитель аутентифицирован.
  </p>
  <p>
    Образ содержит в себе:
  </p>
  <ul>
    <li>smtp (порт 25/tcp) и smtps (порт 465/tcp) сервер для отправки сообщений</li>
    <li>imap (порт 143/tcp) и imaps (порт 993/tcp) сервер для доступа к почтовым ящикам по протоколу imap</li>
    <li>pop3d (порт 110/tcp) и pop3ds (порт 995/tcp) сервер для доступа к почтовым ящикам по протоколу pop3d</li>
    <li>http (порт 80/tcp) сервер-заглушка для показа общей информации о проекте и реализации удобной возможности
      первоначальной загрузки сертификата CA (при использовании самоподписанного сертификата CA) в
      браузер или почтовый клиент.
    </li>
    <li>
      https (порт 443/tcp) сервер для доступа к почтовым ящикам через web gui (webmail) на базе
      <a href="https://github.com/RainLoop/rainloop-webmail">RainLoop</a>. В исходный код сервера я внес небольшое исправление,
      чтобы можно было входить в любой корректный почтовый ящик, указав полный email-адрес в качестве login name
      и часть адреса до символа @, в качестве пароля. Настраивать доступ индивидуально для каждого домена, как это
      реализовано в исходном продукте не нужно. После применения исправлений сервер считает, то доступен любой домен.
    </li>
  </ul>
  <p>
    <a href="ca.crt" download>Загрузить сертификат CA</a>
  </p>
  <p>
    <a href="webmail/index.php">Перейти в webmail</a>
  </p>
</article>
